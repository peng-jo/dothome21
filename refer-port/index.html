<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>포트폴리오</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/moonspam/NanumSquare@1.0/nanumsquare.css">
    <link rel="stylesheet" href="./assets/css/style.css">
</head>
<body>
    <div class="scroll">0</div>
    <div id="contents">
        <section id="section1">
        </section>
    </div>
    <header id="header">
        <ul class="header__left">
            <li><img class="header__circle" src="./assets/svg/plus_circle.svg" alt="plus_circle"></li>
            <li>
                <span>
                    <div>PORT PROCESS</div>
                    <span class="header__num">10%</span>
                    <span class="header__percent">
                        <span class="header__percent__show">
                            
                        </span>
                    </span>
                </span>
            </li>
        </ul>
        <ul class="header__right">
            <li>WORK</li>
            <li>CONTACT</li>
            <li class="yellow">
                <span>PORT MENU</span>
            </li>
        </ul>
    </header>
    <section id="section1">
		<div class="span__wrapper">
			<div class="span__cont show blink">
				<span class="c1 ">
					CODING LIFE
				</span>
			</div>
			<div class="span__cont blink">
				<span class="c2 ">
					LIFE IS CODING
				</span>
			</div>
		</div>
	</section>
	<section id="section2">
        <div class="span__cont2 fixed text-motion"
            data-0 = "transform: translate(-5vw, -20%);visibility: visible;"
            data-4000="visibility: hidden;transform: translate(-5vw, -100%);"
            data-6000 = "transform: translate(-5vw, -120%);"
            data-emit-events
        >
			<span>CODING</span>
			<span>LIFE</span>
			<span>SOMEONE</span>
			<span>WHO</span>
			<span>WANTS</span>
			<span>BETTER</span>
			<span>FRONTEND</span>
		</div>
		<div class="span__cont fixed"
            data-0 = "transform: translate(-5vw, -20%);"
            data-4000="opacity:1;transform: translate(-5vw, -100%)"
            data-6000 = "transform: translate(-5vw, -120%);opacity:0;"
        >
			<span>CODING</span>
			<span>LIFE</span>
			<span>SOMEONE</span>
			<span>WHO</span>
			<span>WANTS</span>
			<span>BETTER</span>
			<span>FRONTEND</span>
		</div>
        <div class="video__wrapper fixed"
            data-5300="opacity:0"
            data-6000="opacity:1"
        >
            <video src="./assets/video/video.mp4" autoplay loop></video>
        </div>
        <div class="text_wrapper fixed"
            data-6000="display:none;"
            data-6001="display:block;"
        >
            <span class="text"
                data-6001="transform:translateX(0%)"
                data-7000="transform:translateX(-50%)"
                data-8000="transform:translateX(-110%)"
            >
                안녕하세요 저는 프론트엔드 개발자를 꿈꾸고 있는 신입 개발자 조범수 입니다
            </span>
        </div>
	</section>
    <footer>
        <span class="port">
            PORT
        </span>
    </footer>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/skrollr/0.6.30/skrollr.min.js"></script>
    <script>
        const video = document.querySelector('.video');
		const section = document.querySelectorAll('section');
        const spanCont = document.querySelectorAll('.span__cont');
        let allowed = false;
        let allowed2 = false;
        let flag = false;
        skrollr.init({
            smoothScrolling:true,
            keyframe: function(element, name, direction) { //element, name, direction
                //name will be one of data500, dataTopBottom, data_offsetCenter
                // see the first criteria, we check if element match the element we selected above
                console.log(element)
                if(element){
                    flag = (flag == true) ? false : true;
                }
            }
        });

        window.addEventListener("scroll", ()=>{
            let scrollTop = document.documentElement.scrollTop || window.scrollY || window.pageYOffset
            document.querySelector(".scroll").innerHTML = parseInt(scrollTop);
        });
   
        //휠스크롤시 
        function doWheel(e){
        
            if (!allowed){
                e.preventDefault();
            }

            if(allowed2 && flag){
                allowed2 = false;
                document.querySelector(".span__cont2").classList.add("text-opacity");
                setTimeout(()=>{
                    console.log('run');
                    document.querySelector(".span__cont2").classList.remove("text-opacity");
                    allowed2 = true;
                },100)
                
            }


        }
	

        setTimeout(()=>{
            console.log('2')
            spanCont[0].classList.remove('show');
            spanCont[1].classList.add('show');
            setTimeout(()=>{
                spanCont[1].classList.remove('show');
				section[0].remove();
                section[2].classList.add('show');
                allowed = true;
            },1500)
        },1500)
        window.addEventListener("wheel",doWheel,{passive:false});
    </script>
</body>
</html>